@import "tailwindcss";

:root {
  /* Primary palette (EGA-inspired) */
  --background: #222326; /* dark charcoal */
  --surface: #2b2b2d;
  --foreground: #e6e6e6; /* main text */
  --muted: #9aa0a6; /* secondary text */
  --ega-cyan: 34,211,238; /* stored as rgb components for rgba usage */
  --ega-magenta: 244,114,182;
  --ega-white: 255,255,255;
}

/* Explicit EGA theme hook for consistency with other themed variants */
html[data-theme='ega'] {
  /* Variables already defined on :root; this ensures cascading specificity parity */
  --background: #222326;
  --surface: #2b2b2d;
  --foreground: #e6e6e6;
  --muted: #9aa0a6;
  --ega-cyan: 34,211,238;
  --ega-magenta: 244,114,182;
  --ega-white: 255,255,255;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: var(--font-geist-sans);
  --font-mono: var(--font-geist-mono);
}

@media (prefers-color-scheme: dark) {
  :root {
    /* already dark by default; keep variables consistent for dark mode */
    --background: #222326;
    --foreground: #e6e6e6;
  }
}

body {
  background: var(--background);
  color: var(--foreground);
  font-family: Arial, Helvetica, sans-serif;
}

/* Map some Tailwind classes to our palette so existing markup stays unchanged */
.bg-black { background-color: var(--background) !important; }
.bg-gray-900 { background-color: var(--surface) !important; }
.text-white { color: rgb(var(--ega-white)) !important; }
.text-cyan-300 { color: rgb(var(--ega-cyan)) !important; }
.text-cyan-400 { color: rgb(var(--ega-cyan)) !important; }
.text-pink-400 { color: rgb(var(--ega-magenta)) !important; }
.text-magenta-400 { color: rgb(var(--ega-magenta)) !important; }
.border-cyan-400 { border-color: rgb(var(--ega-cyan)) !important; }
.border-magenta-500 { border-color: rgb(var(--ega-magenta)) !important; }
.hover\:text-cyan-400:hover { color: rgb(var(--ega-cyan)) !important; }
.hover\:text-pink-400:hover { color: rgb(var(--ega-magenta)) !important; }
.hover\:border-white:hover { border-color: rgb(var(--ega-white)) !important; }

/* subtle link style to match CV */
a { color: rgb(var(--ega-cyan)); text-decoration: none; }
a:hover { color: rgb(var(--ega-magenta)); }

/* Muted text */
.text-slate-300, .text-slate-400, .text-zinc-400 { color: var(--muted) !important; }

/* Footer and decorative boxes */
.border-yellow-300 { border-color: rgb(var(--ega-white)) !important; }
.text-yellow-300 { color: rgb(var(--ega-white)) !important; }

/* --- Standout effects: animated gradient, scanlines, CRT glow, neon links --- */

@keyframes gradientShift {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

body::before {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -3;
  background: linear-gradient(120deg, rgba(var(--ega-cyan),0.07), rgba(var(--ega-magenta),0.06), rgba(var(--ega-white),0.02));
  background-size: 400% 400%;
  opacity: 1;
  mix-blend-mode: screen;
  animation: gradientShift 18s ease infinite;
  pointer-events: none;
}

/* subtle CRT scanlines overlay */
.overlay-scanlines {
  position: fixed;
  inset: 0;
  z-index: 60;
  pointer-events: none;
  /* stronger CRT scanlines for a more visible effect */
  /* denser dark lines with a faint bright line, smaller spacing for a CRT look */
  background-image: linear-gradient(rgba(0,0,0,0.22) 50%, rgba(255,255,255,0.04) 50%);
  background-size: 100% 4px;
  mix-blend-mode: overlay;
  opacity: 0.95;
  /* subtle vertical jitter to simulate a screen wobble */
  animation: scanlineFlicker 3s steps(3) infinite;
}

@keyframes scanlineFlicker {
  0% { transform: translateY(0); opacity: 0.92; }
  25% { transform: translateY(0.2px); opacity: 0.98; }
  50% { transform: translateY(-0.3px); opacity: 0.94; }
  75% { transform: translateY(0.1px); opacity: 0.97; }
  100% { transform: translateY(0); opacity: 0.92; }
}

/* Add a faint film-grain overlay for texture */
.overlay-scanlines::after {
  content: '';
  position: absolute;
  inset: 0;
  background-image: radial-gradient(rgba(0,0,0,0.02) 1px, transparent 1px), radial-gradient(rgba(255,255,255,0.01) 1px, transparent 1px);
  background-size: 3px 3px, 6px 6px;
  opacity: 0.45;
  pointer-events: none;
}

/* light vignette + subtle noise using radial gradients */
body::after {
  content: "";
  position: fixed;
  inset: 0;
  z-index: -1;
  background: radial-gradient(ellipse at center, rgba(255,255,255,0.02) 0%, rgba(0,0,0,0.5) 75%);
  pointer-events: none;
}

/* Neon link glow on hover */
.neon-link {
  transition: text-shadow 220ms ease, color 160ms ease;
}
.neon-link:hover {
  text-shadow: 0 0 10px rgba(var(--ega-cyan),0.8), 0 0 24px rgba(var(--ega-magenta),0.35);
  color: rgb(var(--ega-white));
}

/* Hero caret */
.hero-caret {
  display: inline-block;
  margin-left: 8px;
  color: rgb(var(--ega-white));
  opacity: 0.95;
  animation: blink 1s steps(1) infinite;
}
@keyframes blink { 50% { opacity: 0 } }

/* Make overlay slightly weaker on mobile */
@media (max-width: 640px) {
  .overlay-scanlines { opacity: 0.3; }
  body::before { opacity: 0.6; }
}

/* Particle canvas sits behind the gradient and scanlines */
.particle-canvas {
  position: fixed;
  inset: 0;
  z-index: -2;
  pointer-events: none;
  opacity: 0.45;
}

/* Card tilt variables and effect (set by JS per-card) */
.tilt-card {
  --tcx: 0; /* -1..1 */
  --tcy: 0;
  transition: transform 160ms ease, box-shadow 160ms ease;
  transform: perspective(900px) rotateX(calc(var(--tcy) * 6deg)) rotateY(calc(var(--tcx) * -8deg)) translateZ(0);
}
.tilt-card:hover { box-shadow: 0 20px 60px rgba(0,0,0,0.6); }

/* Header glitch animation */
@keyframes headerGlitch {
  0% { transform: translate3d(0,0,0); }
  20% { transform: translate3d(-4px,0,0); filter: hue-rotate(5deg); }
  40% { transform: translate3d(3px,-1px,0); filter: hue-rotate(-5deg); }
  60% { transform: translate3d(-2px,1px,0); }
  80% { transform: translate3d(1px,0,0); }
  100% { transform: translate3d(0,0,0); }
}
.glitch { display: inline-block; }
.glitch--active { animation: headerGlitch 420ms linear; }

/* Typewriter text */
.typewriter {
  display: inline-block;
  border-right: 2px solid rgba(var(--ega-white),0.9);
  padding-right: 6px;
  white-space: nowrap;
  overflow: hidden;
}


/* 3D header variables and effect - subtle, reactive to mouse position */
:root {
  /* normalized mouse position -1 .. 1 */
  --mx: 0;
  --my: 0;
}


/* 3D header styles are opt-in via the data attribute `data-three-d="true"` on <html> */
html[data-three-d="true"] h1,
html[data-three-d="true"] h2,
html[data-three-d="true"] h3,
html[data-three-d="true"] h4,
html[data-three-d="true"] h5,
html[data-three-d="true"] h6 {
  color: var(--foreground);
  position: relative;
  transition: text-shadow 120ms ease, transform 120ms ease;
  /* Use element-level variables when available, fall back to root --mx/--my */
  --mx-local: calc(var(--mx, 0));
  --my-local: calc(var(--my, 0));
  
  /* stronger 3D tilt using perspective+rotate for a noticeable effect */
  transform: perspective(900px) rotateX(calc(var(--my-local) * 9deg)) rotateY(calc(var(--mx-local) * 12deg)) translate3d(calc(var(--mx-local) * -12px), calc(var(--my-local) * -12px), 0);
  will-change: text-shadow, transform;
}

/* Intensify effect on hover - the header "leans" toward the pointer */
html[data-three-d="true"] h1:hover,
html[data-three-d="true"] h2:hover,
html[data-three-d="true"] h3:hover,
html[data-three-d="true"] h4:hover,
html[data-three-d="true"] h5:hover,
html[data-three-d="true"] h6:hover {
  transform: perspective(1000px) rotateX(calc(var(--my-local) * 12deg)) rotateY(calc(var(--mx-local) * 16deg)) translate3d(calc(var(--mx-local) * -6px), calc(var(--my-local) * -6px), 0) scale(1.03);
}

/* Small responsive fallback for very small screens */
@media (max-width: 640px) {
  h1, h2, h3, h4, h5, h6 {
    text-shadow: none;
    transform: none;
  }
}

/* CRT Monitor Turn-On Animation */
@keyframes crtTurnOn {
  0% {
    opacity: 1;
    transform: scale(0.95);
    filter: brightness(0.95);
  }
  10% {
    filter: brightness(0.8);
  }
  30% {
    opacity: 1;
    filter: brightness(0.9);
    transform: scale(1.02);
  }
  50% {
    opacity: 1;
    filter: brightness(1.1);
  }
  70% {
    filter: brightness(1);
  }
  100% {
    opacity: 1;
    filter: brightness(1);
    transform: scale(1);
  }
}

/* CRT Monitor Turn-Off Animation */
@keyframes crtTurnOff {
  0% {
    opacity: 1;
    transform: scale(1) translateY(0);
    filter: brightness(1);
  }
  20% {
    opacity: 0.8;
    filter: brightness(0.8);
  }
  50% {
    opacity: 0.3;
    filter: brightness(0.3);
  }
  80% {
    transform: scale(0.95) translateY(10px);
  }
  100% {
    opacity: 0;
    transform: scale(0.85) translateY(20px);
    filter: brightness(0);
  }
}

/* CRT Scanline flicker during turn-on */
@keyframes crtScanlineFlicker {
  0%, 100% { opacity: 1; }
  20% { opacity: 0.3; }
  40% { opacity: 0.8; }
  60% { opacity: 0.4; }
  80% { opacity: 0.9; }
}

/* Apply CRT turn-on animation */
.crt-turn-on {
  animation: crtTurnOn 800ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards;
}

/* Apply CRT turn-on with scanline glitch */
.crt-turn-on-glitch {
  animation: crtTurnOn 800ms cubic-bezier(0.34, 1.56, 0.64, 1) forwards,
            crtScanlineFlicker 800ms steps(8) forwards;
}

/* Apply CRT turn-off animation */
.crt-turn-off {
  animation: crtTurnOff 600ms cubic-bezier(0.36, 0, 0.66, -0.56) forwards;
}

/* Theme and motion toggle styles */
.theme-toggle {
  right: 8px;
  top: 8px;
  z-index: 9999;
  background: rgba(var(--ega-white), 0.06);
  color: rgb(var(--ega-white));
  border: 1px solid rgba(var(--ega-white), 0.08);
  padding: 6px 10px;
  font-size: 11px;
  font-weight: 600;
  border-radius: 6px;
  backdrop-filter: blur(6px);
  cursor: pointer;
  transition: all 200ms ease;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}
.theme-toggle:hover {
  background: rgba(var(--ega-cyan), 0.12);
  border-color: rgb(var(--ega-cyan));
  box-shadow: 0 4px 16px rgba(var(--ega-cyan), 0.2);
}

@media (min-width: 640px) {
  .theme-toggle {
    right: 12px;
    top: 12px;
    padding: 8px 12px;
    font-size: 13px;
  }
}

.motion-toggle {
  position: fixed;
  left: 8px;
  bottom: 8px;
  z-index: 9999;
  background: rgba(var(--ega-white), 0.06);
  color: rgb(var(--ega-white));
  border: 1px solid rgba(var(--ega-white), 0.08);
  padding: 6px 8px;
  font-size: 10px;
  border-radius: 6px;
  backdrop-filter: blur(6px);
  cursor: pointer;
}
.motion-toggle[aria-pressed="true"] {
  box-shadow: 0 6px 20px rgba(0,0,0,0.6), 0 0 12px rgba(var(--ega-magenta),0.12);
}

@media (min-width: 640px) {
  .motion-toggle {
    left: 12px;
    bottom: 12px;
    padding: 8px 10px;
    font-size: 12px;
  }
}

/* When reduce-motion is enabled, pause/hide heavy animations and the particle canvas */
html[data-reduce-motion="true"] .particle-canvas {
  display: none !important;
}
html[data-reduce-motion="true"] * {
  animation-play-state: paused !important;
  transition-duration: 0.001ms !important;
}
html[data-reduce-motion="true"] .hero-caret { animation-play-state: paused !important; opacity: 1; }
html[data-reduce-motion="true"] .glitch--active { animation-play-state: paused !important; }

/* Slightly lower particle opacity on small screens */
@media (max-width: 640px) {
  .particle-canvas { opacity: 0.32; }
}

/* ========================================
   CRT GREEN MONOCHROME THEME
   ======================================== */
html[data-theme="crt-green"] {
  --background: #002211; /* pure black background */
  --surface: #001100;
  --foreground: #33ff33; /* bright CRT green */
  --muted: #22bb22; /* dimmer green for secondary text */
  --ega-cyan: 51,255,51; /* green for cyan replacement */
  --ega-magenta: 102,255,102; /* lighter green for magenta replacement */
  --ega-white: 51,255,51; /* green for white replacement */
}

/* CRT green theme adjustments */
html[data-theme="crt-green"] body {
  background: #002211;
  color: #33ff33;
}

html[data-theme="crt-green"] .particle-canvas {
  /* Particles should be green in CRT mode */
  filter: hue-rotate(90deg) saturate(2);
}

html[data-theme="crt-green"] body::before {
  /* Monochrome green gradient overlay */
  background: linear-gradient(120deg, rgba(51,255,51,0.05), rgba(102,255,102,0.03), rgba(51,255,51,0.02));
  background-size: 400% 400%;
}

html[data-theme="crt-green"] .overlay-scanlines {
  /* Stronger scanlines for authentic CRT look */
  background-image: linear-gradient(rgba(0,0,0,0.4) 50%, rgba(51,255,51,0.06) 50%);
  opacity: 1;
}

html[data-theme="crt-green"] body::after {
  /* Darker vignette for CRT effect */
  background: radial-gradient(ellipse at center, rgba(51,255,51,0.02) 0%, rgba(0,0,0,0.8) 75%);
}

/* Add phosphor glow effect to text in CRT mode */
html[data-theme="crt-green"] h1,
html[data-theme="crt-green"] h2,
html[data-theme="crt-green"] h3 {
  text-shadow: 0 0 8px rgba(51,255,51,0.8), 0 0 16px rgba(51,255,51,0.4);
}

html[data-theme="crt-green"] .neon-link:hover {
  text-shadow: 0 0 12px rgba(51,255,51,1), 0 0 24px rgba(102,255,102,0.6);
}

html[data-theme="crt-green"] .theme-toggle,
html[data-theme="crt-green"] .motion-toggle {
  background: rgba(51,255,51, 0.08);
  color: #33ff33;
  border-color: rgba(51,255,51, 0.2);
}

html[data-theme="crt-green"] .theme-toggle:hover {
  background: rgba(51,255,51, 0.15);
  border-color: #33ff33;
  box-shadow: 0 4px 16px rgba(51,255,51, 0.3);
}

/* ========================================
   TRON THEME (Lighter background)
   ======================================== */
html[data-theme="tron"] {
  --background: #0a1628; /* dark blue-grey background */
  --surface: #0f1e33;
  --foreground: #6fc3df; /* bright electric blue */
  --muted: #4a90a4; /* dimmer blue for secondary text */
  --ega-cyan: 111,195,223; /* electric blue */
  --ega-magenta: 255,140,60; /* tron orange */
  --ega-white: 200,220,255; /* bright blue-white */
}

/* Tron theme adjustments */
html[data-theme="tron"] body {
  background: linear-gradient(180deg, #0a1628 0%, #152238 100%);
  color: #6fc3df;
}

html[data-theme="tron"] .particle-canvas {
  /* Blue/orange particles for Tron mode */
  opacity: 0.6;
}

html[data-theme="tron"] body::before {
  /* Electric blue and orange gradient overlay */
  background: linear-gradient(120deg, rgba(111,195,223,0.08), rgba(255,140,60,0.06), rgba(111,195,223,0.04));
  background-size: 400% 400%;
  opacity: 1.2;
}

html[data-theme="tron"] .overlay-scanlines {
  /* Lighter scanlines for Tron look */
  background-image: linear-gradient(rgba(0,0,0,0.12) 50%, rgba(111,195,223,0.03) 50%);
  opacity: 0.7;
}

html[data-theme="tron"] body::after {
  /* Subtle vignette */
  background: radial-gradient(ellipse at center, rgba(111,195,223,0.04) 0%, rgba(10,22,40,0.6) 85%);
}

/* Add electric glow effect to text in Tron mode */
html[data-theme="tron"] h1,
html[data-theme="tron"] h2,
html[data-theme="tron"] h3 {
  color: #6fc3df;
  text-shadow: 0 0 10px rgba(111,195,223,0.6), 0 0 20px rgba(111,195,223,0.3), 0 0 30px rgba(111,195,223,0.1);
}

html[data-theme="tron"] .neon-link {
  color: #6fc3df;
}

html[data-theme="tron"] .neon-link:hover {
  color: #ff8c3c;
  text-shadow: 0 0 12px rgba(255,140,60,1), 0 0 24px rgba(255,140,60,0.6), 0 0 36px rgba(255,140,60,0.3);
}

html[data-theme="tron"] .theme-toggle,
html[data-theme="tron"] .motion-toggle {
  background: rgba(111,195,223, 0.1);
  color: #6fc3df;
  border-color: rgba(111,195,223, 0.3);
  box-shadow: 0 0 8px rgba(111,195,223,0.2);
}

html[data-theme="tron"] .theme-toggle:hover {
  background: rgba(255,140,60, 0.15);
  border-color: #ff8c3c;
  color: #ff8c3c;
  box-shadow: 0 4px 16px rgba(255,140,60, 0.4), 0 0 12px rgba(255,140,60,0.3);
}

/* Tron-style grid lines effect */
html[data-theme="tron"]::after {
  content: '';
  position: fixed;
  inset: 0;
  z-index: -2;
  background-image: 
    linear-gradient(0deg, transparent 24%, rgba(111,195,223,0.05) 25%, rgba(111,195,223,0.05) 26%, transparent 27%, transparent 74%, rgba(111,195,223,0.05) 75%, rgba(111,195,223,0.05) 76%, transparent 77%, transparent),
    linear-gradient(90deg, transparent 24%, rgba(111,195,223,0.05) 25%, rgba(111,195,223,0.05) 26%, transparent 27%, transparent 74%, rgba(111,195,223,0.05) 75%, rgba(111,195,223,0.05) 76%, transparent 77%, transparent);
  background-size: 50px 50px;
  pointer-events: none;
  opacity: 0.3;
}

/* Tron orange accents for borders and highlights */
html[data-theme="tron"] .tilt-card {
  border-color: rgba(111,195,223, 0.3) !important;
}

html[data-theme="tron"] .tilt-card:hover {
  border-color: rgba(255,140,60, 0.6) !important;
  box-shadow: 0 0 20px rgba(255,140,60, 0.3), 0 20px 60px rgba(0,0,0,0.6);
}

html[data-theme="tron"] a {
  color: #6fc3df;
}

html[data-theme="tron"] a:hover {
  color: #ff8c3c;
}

/* ========================================
   LIGHT TERMINAL THEME (High contrast light background)
   ======================================== */
html[data-theme="light"] {
  --background: #f5f7fa; /* light shell background */
  --surface: #ffffff; /* card surface */
  --foreground: #1e2430; /* primary text (dark slate) */
  --muted: #5d6b7a; /* secondary text */
  --ega-cyan: 16,108,138; /* teal accent */
  --ega-magenta: 184,52,118; /* raspberry accent */
  --ega-white: 0,0,0; /* treat 'white' utility classes as dark text for readability */
}

html[data-theme="light"] body {
  background: linear-gradient(180deg, #f5f7fa 0%, #e9eef3 60%, #dde3ea 100%);
  color: var(--foreground);
}

html[data-theme="light"] body::before {
  background: linear-gradient(120deg,
    rgba(16,108,138,0.10),
    rgba(184,52,118,0.08),
    rgba(0,0,0,0.05)
  );
  opacity: 0.8;
  mix-blend-mode: normal;
}

html[data-theme="light"] .overlay-scanlines {
  background-image: linear-gradient(rgba(0,0,0,0.06) 50%, rgba(255,255,255,0.5) 50%);
  opacity: 0.35;
  mix-blend-mode: multiply;
}

html[data-theme="light"] body::after {
  background: radial-gradient(ellipse at center, rgba(0,0,0,0.05) 0%, rgba(0,0,0,0.08) 75%);
}

/* Headings soft glow adjusted for light background */
html[data-theme="light"] h1,
html[data-theme="light"] h2,
html[data-theme="light"] h3,
html[data-theme="light"] h4,
html[data-theme="light"] h5,
html[data-theme="light"] h6 {
  text-shadow: 0 1px 0 rgba(255,255,255,0.6), 0 0 8px rgba(184,52,118,0.15);
  color: var(--foreground);
}

html[data-theme="light"] a { color: rgb(var(--ega-cyan)); }
html[data-theme="light"] a:hover { color: rgb(var(--ega-magenta)); }

/* Cards and borders lighten with subtle shadow */
html[data-theme="light"] .tilt-card {
  background: var(--surface) !important;
  border-color: rgba(16,108,138,0.35) !important;
  box-shadow: 0 2px 4px rgba(0,0,0,0.08);
}
html[data-theme="light"] .tilt-card:hover {
  border-color: rgba(184,52,118,0.55) !important;
  box-shadow: 0 6px 24px rgba(0,0,0,0.12), 0 0 12px rgba(16,108,138,0.15);
}

/* Theme & motion toggle for light mode */
html[data-theme="light"] .theme-toggle,
html[data-theme="light"] .motion-toggle {
  background: rgba(255,255,255,0.7);
  border-color: rgba(0,0,0,0.08);
  color: #1e2430;
  box-shadow: 0 2px 8px rgba(0,0,0,0.12);
}
html[data-theme="light"] .theme-toggle:hover {
  background: rgba(184,52,118,0.15);
  border-color: rgba(184,52,118,0.6);
  color: #b83476;
  box-shadow: 0 4px 14px rgba(184,52,118,0.25);
}

/* Neon links adapt */
html[data-theme="light"] .neon-link:hover {
  text-shadow: 0 0 6px rgba(16,108,138,0.4), 0 0 14px rgba(184,52,118,0.25);
  color: #000;
}

/* Particle tint subtle for light */
html[data-theme="light"] .particle-canvas {
  opacity: 0.25;
  filter: saturate(0.8);
}

/* Reduce scanline animation intensity light mode */
html[data-theme="light"] .overlay-scanlines { animation: none; }
